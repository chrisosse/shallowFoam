<?xml version="1.0"?>

<precice-configuration>

    <solver-interface dimensions="3">

    <data:scalar name="FlowDepth"/>
    <data:vector name="Discharge"/>
    <data:scalar name="Alpha"/>
    <data:vector name="Velocity"/>
    <data:scalar name="Prgh"/>

    <mesh name="Test1-Mesh">
        <use-data name="FlowDepth"/>
        <use-data name="Discharge"/>
        <use-data name="Alpha"/>   
        <use-data name="Velocity"/>   
        <use-data name="Prgh"/>   
    </mesh>

    <mesh name="Test2-Mesh">
        <use-data name="FlowDepth"/>
        <use-data name="Discharge"/>
    </mesh>

    <participant name="Test1">
        <use-mesh name="Test1-Mesh" provide="yes"/>
        <use-mesh name="Test2-Mesh" from="Test2"/>
        <write-data name="FlowDepth" mesh="Test1-Mesh"/>
        <write-data name="Discharge" mesh="Test1-Mesh"/>
	<mapping:nearest-neighbor direction="read" from="Test2-Mesh" to="Test1-Mesh" 		constraint="consistent" />
    </participant>

    <participant name="Test2">
        <use-mesh name="Test2-Mesh" provide="yes"/>
        <use-mesh name="Test1-Mesh" from="Test2"/>
        <read-data name="FlowDepth" mesh="Test2-Mesh"/>
        <read-data name="Discharge" mesh="Test2-Mesh"/>
	<mapping:nearest-neighbor direction="read" from="Test1-Mesh" to="Test2-Mesh" 		constraint="consistent" />
    </participant>

    <m2n:sockets from="Test1" to="Test2" exchange-directory=".." />

    <coupling-scheme:serial-explicit>
        <time-window-size value="0.1"/>
        <max-time value="1.0"/>
        <participants first="Test1" second="Test2"/>
        <exchange data="FlowDepth" mesh="Test2-Mesh" from="Test1" to="Test2"/>
        <exchange data="Discharge" mesh="Test2-Mesh" from="Test1" to="Test2"/>
    </coupling-scheme:serial-explicit>

    </solver-interface>
</precice-configuration>
